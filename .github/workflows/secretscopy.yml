name: Sync Secrets 2

on:
  push:
    branches:
      - secretcopy  # Or specify the branch you want to trigger this workflow

jobs:
  sync-secrets:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout source code
        uses: actions/checkout@v2

      - name: Sync Secrets
        env:
            SOURCE_REPO: 'neeratikrishna15/databricksencryption'
            TARGET_REPO: 'neeratikrishna15/databricksactions'
            SOURCE_TOKEN: ${{ secrets.SOURCE_TOKEN }}
            TARGET_TOKEN: ${{ secrets.TARGET_TOKEN }}
            SECRET_NAME: 'COPYTEST'
            SECRET_VALUE: ${{ secrets.SECRET_NAME }}  # Access the secret value
        run: |
            curl --location --request GET 'https://api.github.com/repos/neeratikrishna15/databricksencryption/actions/secrets' --header 'Authorization: Bearer ***REMOVED***'
